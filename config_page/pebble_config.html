<!DOCTYPE html>
<html>
  <head>
    <title>Pebble Config Page</title>
    <link rel="stylesheet" href="pebble_config.css">
    <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
  </head>

  <body>
    <h1>Pebble App Config</h1>
    <p>Do you even <a href="https://www.youtube.com/watch?v=1wIV6l2ux_8">Clubcard</a> bro?</p>
    Card Name: <input type="text" id="cardName" Placeholder="Tesco"><br><br>
    Number: <input type="number" id="cardNumber" Placeholder="123456" pattern="\d*"><br><br>
    <br>
    <button id="addcard_button">Add card</button>
    <br>
    <h3>Scan card:</h3>
    <div class="barcode">
      <input type="file" capture>
      <div id="baroutput"></div>
    </div>
    <div class="barcodeOutput">
      <div id="interactive" class="viewport"><canvas class="imgBuffer" width="320" height="241"></canvas><canvas class="drawingBuffer" width="320" height="241" style="display: block;"></canvas><br clear="all"></div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="js/quagga.js" type="text/javascript"></script>
    <script src="js/file_input.js" type="text/javascript"></script>
  </body>

  <script>
    function saveOptions() {
      var cardName = document.getElementById("cardName");
      var cardNumber = document.getElementById("cardNumber");
      var options = {"name": cardName.value, "number": cardNumber.value}
      return options;
    };

    var submitButton = document.getElementById("addcard_button");
    submitButton.addEventListener("click",
      function() {
        var options = saveOptions();
        var location = 'pebblejs://close#'+ encodeURIComponent(JSON.stringify(options));
        document.location = location;
      },
    false);
  </script>
</html>